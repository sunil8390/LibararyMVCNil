USE [LaibraryDB]
GO
/****** Object:  StoredProcedure [dbo].[BooksGetList]    Script Date: 04-02-2022 13:25:44 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
	ALTER PROCEDURE [dbo].[BooksGetList]

	@BookName NVARCHAR(50) = NULL ,
	@CategoryId INT = NULL,
	@PublisherId INT =NULL
	AS
	/*
	[BooksGetList] null, null, null
	[BooksGetList] null, 'abc', null
	[BooksGetList] null, 'abc', 'pqr'
	[BooksGetList] 'c', 5 , 5

	*/
	BEGIN
	
		SELECT   B.BookId, B.BookName, C.CategoryId,  C.CategoryName , P.PublisherId, P.PublisherName ,B.IsActive
		FROM Books B  
		left join Categories C
		On B.CategoryId= C.CategoryId
		left join Publishers P
		on B.PublisherId= P.PublisherId 
		WHERE (@BookName IS NULL OR BookName LIKE '%'+@BookName+ '%')AND
				(@CategoryId IS NULL OR  c.CategoryId = @CategoryId)AND
				(@PublisherId IS NULL OR p.PublisherId = @PublisherId)
				

	END
	
	

