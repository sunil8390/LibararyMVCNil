@*@model LibararyMVCNil.DAL.Books*@
@*@model IEnumerable<LibararyMVCNil.ViewModel.BooksViewModel>*@

@model LibararyMVCNil.ViewModel.BooksViewModel

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>SearchBook1</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
   
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>

        body {
            background-color: #F5EEF8;
        }


        .main {
            display: flex;
            margin: 4rem;
        }

        .sub_main {
            padding-right: 40px;
        }



        h1 {
            background-color: #7FB3D5;
            padding: 10px;
            text-align: center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-weight: 700;
            
        }

        #panel, #flip {
            padding: 5px;
            text-align: center;
            background-color: #e5eecc;
            border: solid 1px #c3c3c3;
        }

        #panel {
            padding: 50px;
            display: none;
        }



        .pagelist ul{
           
            list-style-type: none;
            display: flex;
        }

            .pagelist ul li {
                padding: 12px;
                margin:7px;
                border: solid;
            }

        .pagelist input {
            background-color: white;
            color: black;
            border: 2px solid #01090e;
            padding: 10px;
            margin: 5px;
            margin-left: 1px;
            border-radius:10px;
        }

        .pagelist input:hover {
                background-color: #0094ff;
                color: white;
                

            }


        #PageNo1 {
            background-color: #0a0303;
            color: #fff;
        }


        .btnstyle {
            background-color: #f00;
        }

        .paging-main{
            display:flex;
        }


       

    </style>

</head>
<body>
    <div id="flip">Click Here to Read Laibrary Intructions and rules</div>
    <div id="panel">
        <p>
            All the personal belongings such as text books, notebooks, files, briefcases, umbrellas etc. should be kept at the property counter. However calculator and plain paper for note taking can be brought inside the library.
            Strict silence should be observed within the library. The member must show his/her identity card when demanded by the library staff. Keep Mobile Phone in silent mode.
        </p>
    </div>

    <div class="col-lg-12">
        <h1> Search library Books</h1>


    </div>


    @using (Html.BeginForm("SearchBook1", "Books", FormMethod.Get, new { @id = "friendform" }))
    {


        <div class="main">
            <div class="sub_main">
                <label><b>Book Name</b></label>

                @Html.TextBoxFor(model => model.BookName, new { @class = "form-control" })

            </div>

            <div class="sub_main">
                <label><b>Category Type</b></label>
                @Html.DropDownListFor(model => model.CategoryId, new SelectList(Model.categorylist, "CategoryId", "CategoryName"), "Select Category", new { @class = "form-control" })

            </div>
            <div class="sub_main">
                <label><b>Publihser Name</b></label>
                @Html.DropDownListFor(model => model.PublisherId, new SelectList(Model.publisherlist, "PublisherId", "PublisherName"), "Select Publisher", new { @class = "form-control" })

            </div>


            <div class="sub_main">
                <label><b>PageNumber</b></label>
                @Html.TextBoxFor(model => model.PageNumber, new { @class = "form-control" })

            </div>

            <div class="sub_main">
                <label><b>RowsOfPage</b></label>

                @Html.DropDownListFor(model => model.RowsOfPage, new SelectList(Model.PageRange), " Please Select Page Range", new { @class = "form-control" })
            </div>

            <div class="sub_main">
                @Html.HiddenFor(model => model.TotalPages)
               



            </div>




            <div class="sub_main">

                <input type="button" onclick="BtnClick()"  value="Search" class="btn btn-outline-success" style="margin-top:24px" />

            </div>
            <div class="sub_main">

                <input type="reset" value="Reset" class="btn btn-outline-info" style="margin-top:24px" />

            </div>


        </div>

        <div class="sub_main">

            <a href="~/Books/AddBook"> <input type="button" name="name" value="Add" class="btn btn-outline-success" style="margin-top:24px" /></a>

        </div>


    }



    <div id="partial_table"></div>    @*partial table*@

    <div id="partialpaging"> </div>    @*partial paging btn*@


    <div id="partiallable"> </div>      @*partial lable*@



    <!--<div class="paging-main">

                <div id="pagepreviews" class="pagelist"></div>-->
    @*paging --*@
    <!--<div id="pagediv" class="pagelist"> </div>-->               @*paging*@

    <!--<div id="pagenext" class="pagelist"></div>-->              @*paging  ++*@

    <!--</div>-->









<script>

    $(document).ready(function () {

        $("#flip").click(function () {
            $("#panel").slideDown("slow");

        });

        $("#panel").click(function () {

            $("#panel").slideUp("slow");
        });


        $("#RowsOfPage").change(function () {                                    //on change event to row of pages
            var selectDropdown = $("#RowsOfPage").val();
            BtnClick(selectDropdown);
        });

        BtnClick();
    });






    $(document).on("click", "#PageNo", function () {                  //paging btn
        $("#PageNumber").val($(this).val());


        BtnClick();
    })
    $(document).on("click", "#next", function () {                     //next page btn

     
      
        //if (parseInt($("#PageNumber").val()) < parseInt($("#TotalPages").val()) )  //parseInt($("#TotalPages").val())
        //{

        var increment = $("#PageNumber").val();

        $("#PageNumber").val(++increment );
        BtnClick();
        //}         
    });
    $(document).on("click", "#previews", function () {                 //previews page btn
       
        if ($("#PageNumber").val() > 1) {
            var decrement = $("#PageNumber").val();
            $("#PageNumber").val(decrement - 1);
            BtnClick();
        }
    });




    function BtnClick() {
        /* debugger;*/


        var valdata = $("#friendform").serialize();



        //console.log(valdata);

        $.ajax
            ({
                url: "/Books/SearchBook1", //get call on controller
                method: "POST",
                /* dataType: 'json',*/
                data: valdata,
                success: function (data) {
                    $('#partial_table').html(data);


                    //console.log(data);
                    //data = JSON.parse(data);


                    //Display table
                    //var strtable = "<table>"

                    //$.each(data.booklist, function (i, v1) {
                    //    strtable +=
                    //        "<tr><td>" + v1.BookId + "</td><td>" + v1.BookName + "</td><td>" + v1.CategoryName + "</td><td>" + v1.PublisherName + "</td><td>" + v1.Quantity + "</td></tr>";


                    //});
                    //strtable += "</table>";


                    //$('#listdiv').html(strtable);







                    //Implement Paging using list tag
                    //var strPage = "<ul>"
                    //for (var i = 1; i <= data.TotalPages; i++) {
                    //    strPage += "<li><a href='' id='PageNo' >" + i + "</a></li>";

                    //}
                    //strPage += "</ul>"
                    //$('#pagediv').html(strPage);



                    //Implement Paging using button

                    //var CurrentPage = data.PageNumber;
                    //var fristpage = data.PageNumber;
                    //var strPage = ""

                    //$("#TotalPages").val(data.TotalPages);          //pass value to total page hidden fileld in form


                    //page
                    //for (var i = 1; i <= data.TotalPages; i++)
                    //{
                    //    debugger;
                    //    if (i == CurrentPage) {
                    //        strPage += "<input type='button' id='PageNo1'  value='"  + CurrentPage + "' />" ;
                    //    }

                    //    else
                    //    {
                    //        strPage += "<input type='button' id='PageNo'  value='" + i + "'/>";
                    //    }
                    //}

                    //next page
                    //var nextpage = ""


                    //if (CurrentPage != data.TotalPages)
                    //{
                    //    nextpage += "<input type='button' id='next'  value='>>'/>"
                    //}



                    //previews page
                    //var previewspage = ""
                    //if (fristpage != 1)
                    //{
                    //     previewspage += "<input type='button' id='previews'  value='<<'/>"
                    //}



                    //$('#pagediv').html(strPage);
                    //$('#pagenext').html(nextpage);
                    //$('#pagepreviews').html(previewspage);


                },


                //error: function (err) {
                //    alert("Somthing went Wrong... ");
                //}
            });


    }



</script>
</body>
</html>